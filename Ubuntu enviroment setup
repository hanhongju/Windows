#Ubuntu新系统环境设置
#打开/etc/apt/sources.list，更换为阿里源
#Ubuntu新系统更新软件和语言包
apt-get update
apt-get dist-upgrade -y
apt autoremove -y
apt-get install  -y language-pack-zh-hans gcc make perl curl unzip vim axel ffmpeg net-tools libavcodec-extra hardinfo
apt-get install  -y mate-sensors-applet preload
apt --fix-broken install

#空格的正则表达式为"\ "
#设定网络容忍度
sed    -i    "s/lcp-echo-failure\ 4/lcp-echo-failure\ 15/g"       /etc/ppp/options
#禁用wifi电源节省管理
sed    -i    "s/wifi.powersave\ =\ 3/wifi.powersave\ =\ 2/g"       /etc/NetworkManager/conf.d/default-wifi-powersave-on.conf
#删除dhcp服务器ipv6功能
sed    -i    "s/dhcp6.name-servers,\ dhcp6.domain-search,\ dhcp6.fqdn,\ dhcp6.sntp-servers,//g"      /etc/dhcp/dhclient.conf
#禁用ipv6
echo   "net.ipv6.conf.all.disable_ipv6 = 1"            >>   /etc/sysctl.conf
echo   "net.ipv6.conf.default.disable_ipv6 = 1"        >>   /etc/sysctl.conf
echo   "net.ipv6.conf.lo.disable_ipv6 = 1"             >>   /etc/sysctl.conf
sysctl -p



#修改swap分区大小 
free -h
#创建一个新的12G的swap文件
cd /
dd if=/dev/zero of=/myexchange bs=1G count=12
#创建swap文件系统
mkswap -f myexchange
chmod 0600 myexchange
#开启新的swap
swapoff /swapfile
swapon /myexchange
#设置开机启动
sed -i     "s/swapfile/myexchange/g"       /etc/fstab
#删掉旧的swap文件
rm -f /swapfile
free -h
#重启

